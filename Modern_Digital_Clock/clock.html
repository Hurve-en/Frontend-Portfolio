<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Modern Digital Clock</title>

    <!-- tiny theme initializer to avoid flash (applies before CSS loads) -->
    <script>
      (function () {
        try {
          const theme = localStorage.getItem("clock_theme");
          if (theme === "dark")
            document.documentElement.setAttribute("data-theme", "dark");
        } catch (e) {}
      })();
    </script>

    <link rel="stylesheet" href="clock.css" />
  </head>
  <body>
    <main class="app" role="application" aria-label="Digital clock application">
      <header class="app-header">
        <h1 class="brand">Digital Clock</h1>

        <div class="controls-row">
          <label class="switch" title="Toggle theme">
            <input
              id="themeToggle"
              type="checkbox"
              aria-label="Toggle dark theme"
            />
            <span class="slider"></span>
          </label>
          <span class="small-label">Theme</span>

          <label class="visually-hidden" for="tzSelect">Timezone</label>
          <select id="tzSelect" aria-label="Timezone select"></select>

          <button
            id="formatToggle"
            class="btn"
            aria-pressed="false"
            title="Toggle 12/24 hour"
          >
            12/24
          </button>

          <label class="visually-hidden" for="viewMode">View mode</label>
          <select id="viewMode" aria-label="View mode">
            <option value="digital">Digital + Analog</option>
            <option value="minimal">Minimal</option>
          </select>
        </div>
      </header>

      <section class="clock-area">
        <div class="time-block">
          <div
            id="timeDisplay"
            class="time-display"
            aria-live="polite"
            aria-atomic="true"
          >
            00:00:00
          </div>
          <div id="dateDisplay" class="date-display" aria-hidden="false">â€”</div>
          <div id="tzLabel" class="tz-label">Local</div>
        </div>

        <div id="analogWrap" class="analog-wrap" aria-hidden="false">
          <!-- SVG analog clock -->
          <svg
            id="analog"
            viewBox="-50 -50 100 100"
            role="img"
            aria-label="Analog clock"
          >
            <circle cx="0" cy="0" r="48" class="face" />
            <g id="ticks"></g>
            <line
              id="hourHand"
              class="hand hour"
              x1="0"
              y1="0"
              x2="0"
              y2="-25"
              stroke-linecap="round"
            />
            <line
              id="minuteHand"
              class="hand minute"
              x1="0"
              y1="0"
              x2="0"
              y2="-36"
              stroke-linecap="round"
            />
            <line
              id="secondHand"
              class="hand second"
              x1="0"
              y1="0"
              x2="0"
              y2="-40"
              stroke-linecap="round"
            />
            <circle cx="0" cy="0" r="1.6" class="hub" />
          </svg>
        </div>
      </section>

      <section class="alarm-area">
        <div class="alarm-controls">
          <label for="alarmTime">Alarm (HH:MM)</label>
          <input
            id="alarmTime"
            type="time"
            aria-label="Set alarm time"
            step="60"
          />
          <button id="setAlarm" class="btn">Set</button>
          <button id="clearAlarm" class="btn ghost">Clear</button>
        </div>

        <div id="alarmState" class="alarm-state" aria-live="assertive" hidden>
          <div class="alarm-message">Alarm!</div>
          <div class="alarm-actions">
            <button id="snoozeBtn" class="btn">Snooze 5m</button>
            <button id="stopBtn" class="btn danger">Stop</button>
          </div>
        </div>
      </section>

      <footer class="app-footer">
        <div class="footer-left">
          <small>Presets: Local, UTC, New_York, London, Tokyo</small>
        </div>
        <div class="footer-right">
          <small
            >Keyboard: Tab to controls, Space/Enter to toggle, Esc clears alarm
            set input</small
          >
        </div>
      </footer>
    </main>

    <audio id="beepSample" preload="auto">
      <!-- fallback beep (very short) encoded as base64 WAV for offline demo -->
      <source
        src="data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEAESsAACJWAAACABAAZGF0YQAAAAA="
        type="audio/wav"
      />
    </audio>

    <script src="clock.js" defer></script>
  </body>
</html>
